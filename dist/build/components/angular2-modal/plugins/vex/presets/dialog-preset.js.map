{"version":3,"file":"dialog-preset.js","sourceRoot":"","sources":["dialog-preset.ts"],"names":[],"mappings":";;;;;;AACA,8BAA6C,kCAAkC,CAAC,CAAA;AAChF,8BAAsD,kBAAkB,CAAC,CAAA;AAEzE,kCAIO,sBAAsB,CAAC,CAAA;AAE9B,sBAAiC,0BAA0B,CAAC,CAAA;AAG5D,IAAM,eAAe,GAAG;IACpB,SAAS;CACZ,CAAC;AAEF;;GAEG;AACH;IAAkC,gCAAe;IAAjD;QAAkC,8BAAe;IAIjD,CAAC;IAAD,mBAAC;AAAD,CAAC,AAJD,CAAkC,+BAAe,GAIhD;AAJY,oBAAY,eAIxB,CAAA;AAED;;;;GAIG;AACH;IAC4D,uCAAyB;IAMjF,6BAAY,KAAY,EACZ,aAA4B,EAC5B,cAAoC,EACpC,QAAiC;QAFjC,6BAA4B,GAA5B,yBAA4B;QAC5B,8BAAoC,GAApC,0BAAoC;QACpC,wBAAiC,GAAjC,oBAAiC;QACzC,kBACI,cAAM,CAAM,EAAC,YAAK,EAAE,8CAAS,EAAE,OAAO,EAAE,EAAE,EAAE,aAAa,EAAE,IAAI,EAAC,EAAE,aAAa,IAAI,EAAE,CAAC,EACtF,kBAAU,CAAS,eAAe,EAAE,cAAc,IAAI,EAAE,CAAC,EACzD,QAAQ,IAAS,YAAY,CAAC,sDAAsD;SACvF,CAAC;IACN,CAAC;IAED,uCAAS,GAAT,UAAU,GAAW,EAAE,OAAe,EAAE,OAAyB;QAC7D,IAAI,GAAG,GAAG;YACN,QAAQ,EAAE,GAAG;YACb,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;SACnB,CAAC;QAEF,IAAI,GAAG,GAAG,0BAAU,CAAC,SAAS,CAAC,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAuB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAE3C,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,yCAAW,GAAX,UAAY,IAAmB;QAAnB,oBAAmB,GAAnB,WAAmB;QAC3B,IAAI,CAAC,SAAS,CACV,uDAAuD,EACvD,IAAI,EACJ,UAAC,GAAc,EAAE,MAAkB,IAAK,OAAA,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAlD,CAAkD,CAC7F,CAAC;QACF,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,6CAAe,GAAf,UAAgB,IAAuB;QAAvB,oBAAuB,GAAvB,eAAuB;QACnC,IAAI,CAAC,SAAS,CACV,wDAAwD,EACxD,IAAI,EACJ,UAAC,GAAc,EAAE,MAAkB,IAAK,OAAA,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,EAApB,CAAoB,CAC/D,CAAC;QACF,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACL,0BAAC;AAAD,CAAC,AAhDD,CAC4D,sCAAsB,GA+CjF;AAhDY,2BAAmB,sBAgD/B,CAAA","sourcesContent":["import {Type} from '@angular/core';\r\nimport {FluentAssignMethod, privateKey} from '../../../framework/fluent-assign';\r\nimport {VEXModalContext, VEXModalContextBuilder} from '../modal-context';\r\nimport {Modal} from '../modal';\r\nimport {\r\n    DialogFormModal as component, \r\n    VEXButtonHandler, \r\n    VEXButtonConfig\r\n} from '../dialog-form-modal';\r\n\r\nimport {extend, arrayUnion} from '../../../framework/utils';\r\n\r\n\r\nconst DEFAULT_SETTERS = [\r\n    'content'\r\n];\r\n\r\n/**\r\n * Data definition\r\n */\r\nexport class DialogPreset extends VEXModalContext {\r\n    defaultResult: any;\r\n    content: Type;\r\n    buttons: VEXButtonConfig[];\r\n} \r\n\r\n/**\r\n * A Preset representing the configuration needed to open MessageModal.\r\n * This is an abstract implementation with no concrete behaviour.\r\n * Use derived implementation.\r\n */\r\nexport class DialogPresetBuilder<T extends DialogPreset> \r\n                                                    extends VEXModalContextBuilder<T> {\r\n    /**\r\n     * the message to display on the modal.\r\n     */\r\n    content: FluentAssignMethod<Type, this>;\r\n\r\n    constructor(modal: Modal,\r\n                defaultValues: T = undefined,\r\n                initialSetters: string[] = undefined,\r\n                baseType: new () => T = undefined) {\r\n        super(\r\n            extend<any>({modal, component, buttons: [], defaultResult: true}, defaultValues || {}),\r\n            arrayUnion<string>(DEFAULT_SETTERS, initialSetters || []),\r\n            baseType || <any>DialogPreset // https://github.com/Microsoft/TypeScript/issues/7234\r\n        );\r\n    }\r\n\r\n    addButton(css: string, caption: string, onClick: VEXButtonHandler): this {\r\n        let btn = {\r\n            cssClass: css,\r\n            caption: caption,\r\n            onClick: onClick\r\n        };\r\n\r\n        let key = privateKey('buttons');\r\n        (this[key] as VEXButtonConfig[]).push(btn);\r\n\r\n        return this;\r\n    }\r\n\r\n    addOkButton(text: string = 'OK'): this {\r\n        this.addButton(\r\n            'vex-dialog-button-primary vex-dialog-button vex-first',\r\n            text,\r\n            (cmp: component, $event: MouseEvent) => cmp.dialog.close(cmp.dialog.context.defaultResult)\r\n        );\r\n        return this;\r\n    }\r\n\r\n    addCancelButton(text: string = 'CANCEL'): this {\r\n        this.addButton(\r\n            'vex-dialog-button-secondary vex-dialog-button vex-last',\r\n            text,\r\n            (cmp: component, $event: MouseEvent) => cmp.dialog.dismiss()\r\n        );\r\n        return this;\r\n    }\r\n}\r\n"]}