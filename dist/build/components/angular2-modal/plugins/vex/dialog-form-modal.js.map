{"version":3,"file":"dialog-form-modal.js","sourceRoot":"","sources":["dialog-form-modal.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAUO,eAAe,CAAC,CAAA;AAEvB,+BAAgC,uCAAuC,CAAC,CAAA;AAExE,uBAAmD,qBAAqB,CAAC,CAAA;AACzE,2BAA0B,yBAAyB,CAAC,CAAA;AAsBpD;;GAEG;AAWH;IAAA;QAOE;;;WAGG;QACc,kBAAa,GAAG,IAAI,mBAAY,EAAuB,CAAC;IAM3E,CAAC;IAJC,kCAAO,GAAP,UAAQ,GAAQ,EAAE,MAAkB;QAClC,MAAM,CAAC,eAAe,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,QAAG,EAAE,cAAM,EAAC,CAAC,CAAC;IACzC,CAAC;IAXD;QAAC,YAAK,EAAE;;qDAAA;IAMR;QAAC,aAAM,EAAE;;2DAAA;IArBX;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;YAC9B,aAAa,EAAE,wBAAiB,CAAC,IAAI;YACrC,QAAQ,EAAE,0NAKL;SACN,CAAC;;wBAAA;IAkBF,uBAAC;AAAD,CAAC,AAjBD,IAiBC;AAjBY,wBAAgB,mBAiB5B,CAAA;AAED;;;GAGG;AAUH;IAIE,yBAAmB,MAA+B,EAC9B,cAAkC,EAClC,GAA6B;QAF9B,WAAM,GAAN,MAAM,CAAyB;QAC9B,mBAAc,GAAd,cAAc,CAAoB;QAClC,QAAG,GAAH,GAAG,CAA0B;QAC/C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;IAChC,CAAC;IAED,yCAAe,GAAf;QAAA,iBAcC;QAbC;;;;;WAKG;QACH,UAAU,CAAE;YACR,KAAI,CAAC,MAAM,CAAC,UAAU,GAAG,gCAAe,CACtC,KAAI,CAAC,GAAG,EACR,KAAI,CAAC,OAAO,CAAC,OAAO,EACpB,KAAI,CAAC,cAAc,EACnB,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uCAAa,GAAb,UAAc,MAA2B;QACvC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1C,CAAC;IA1BD;QAAC,gBAAS,CAAC,aAAa,EAAE,EAAC,IAAI,EAAE,uBAAgB,EAAC,CAAC;;2DAAA;IAXrD;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,cAAc;YACxB,aAAa,EAAE,wBAAiB,CAAC,IAAI;YACrC,QAAQ,EAAE,kPAIJ;SACP,CAAC;;uBAAA;IA8BF,sBAAC;AAAD,CAAC,AA7BD,IA6BC;AA7BY,uBAAe,kBA6B3B,CAAA;AAeD;IAGE,oBAAmB,MAA+B;QAA/B,WAAM,GAAN,MAAM,CAAyB;QAChD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;IAChC,CAAC;IAlBH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,gBAAgB;YAC1B,aAAa,EAAE,wBAAiB,CAAC,IAAI;YACrC,QAAQ,EAAE,oaAQD;SACV,CAAC;;kBAAA;IAOF,iBAAC;AAAD,CAAC,AAND,IAMC;AANY,kBAAU,aAMtB,CAAA","sourcesContent":["import {\r\n  Component,\r\n  ComponentFactoryResolver,\r\n  ViewContainerRef,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n  AfterViewInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\nimport { createComponent } from '../../../../components/angular2-modal';\r\n\r\nimport { ModalComponent, ModalCompileConfig } from '../../models/tokens';\r\nimport { DialogRef } from '../../models/dialog-ref';\r\nimport { DialogPreset } from './presets/dialog-preset';\r\nimport { DropInPreset } from './presets/dropin-preset';\r\n\r\nexport interface VEXButtonHandler {\r\n  (cmp: ModalComponent<DialogPreset>, $event: MouseEvent): void;\r\n}\r\n\r\n/**\r\n * Interface for button definition\r\n */\r\nexport interface VEXButtonConfig {\r\n  cssClass: string;\r\n  caption: string;\r\n  onClick: VEXButtonHandler;\r\n}\r\n\r\nexport interface VEXButtonClickEvent {\r\n  btn: VEXButtonConfig;\r\n  $event: MouseEvent;\r\n}\r\n\r\n/**\r\n * A Dialog is a\r\n */\r\n@Component({\r\n  selector: 'vex-dialog-buttons',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `<div class=\"vex-dialog-buttons\">\r\n    <button type=\"button\" \r\n         *ngFor=\"let btn of buttons;\"\r\n         [class]=\"btn.cssClass\"\r\n         (click)=\"onClick(btn, $event)\">{{btn.caption}}</button>\r\n</div>`\r\n})\r\nexport class VEXDialogButtons {\r\n\r\n  /**\r\n   * A collection of button configurations, each configuration is a button to display.\r\n   */\r\n  @Input() public buttons: VEXButtonConfig[];\r\n\r\n  /**\r\n   * Emitted when a button was clicked\r\n   * @type {EventEmitter<VEXButtonClickEvent>}\r\n   */\r\n  @Output() public onButtonClick = new EventEmitter<VEXButtonClickEvent>();\r\n\r\n  onClick(btn: any, $event: MouseEvent) {\r\n    $event.stopPropagation();\r\n    this.onButtonClick.emit({btn, $event});\r\n  }\r\n}\r\n\r\n/**\r\n * A Dialog with customized buttons wrapped in a form.\r\n *\r\n */\r\n@Component({\r\n  selector: 'modal-dialog',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `<form class=\"vex-dialog-form\">\r\n    <div style=\"display: none\" #modalDialog></div> \r\n    <vex-dialog-buttons [buttons]=\"context.buttons\"\r\n                        (onButtonClick)=\"onButtonClick($event)\"></vex-dialog-buttons>\r\n</form>`\r\n})\r\nexport class DialogFormModal implements AfterViewInit, ModalComponent<DialogPreset> {\r\n  private context: DialogPreset;\r\n  @ViewChild('modalDialog', {read: ViewContainerRef}) private _viewContainer: ViewContainerRef;\r\n\r\n  constructor(public dialog: DialogRef<DialogPreset>,\r\n              private _compileConfig: ModalCompileConfig,\r\n              private _cr: ComponentFactoryResolver) {\r\n    this.context = dialog.context;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    /*  TODO:\r\n     In RC5 dynamic component creation is no longer async.\r\n     Somewhere down the pipe of the created component a value change happens that fires\r\n     a CD exception. setTimeout is a workaround that mimics the async behavior.\r\n     Find out the error and remove setTimeout.\r\n     */\r\n    setTimeout( () => {\r\n        this.dialog.contentRef = createComponent(\r\n          this._cr,\r\n          this.context.content,\r\n          this._viewContainer,\r\n          this._compileConfig.bindings);\r\n    });\r\n  }\r\n\r\n  onButtonClick($event: VEXButtonClickEvent) {\r\n    $event.btn.onClick(this, $event.$event);\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'drop-in-dialog',\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `<div class=\"vex-dialog-message\">{{context.message}}</div>\r\n    <div *ngIf=\"context.showInput\" class=\"vex-dialog-input\">\r\n        <input autofocus #input\r\n               name=\"vex\" \r\n               type=\"text\" \r\n               class=\"vex-dialog-prompt-input\"\r\n               (change)=\"context.defaultResult = input.value\"               \r\n               placeholder=\"{{context.placeholder}}\">\r\n    </div>`\r\n})\r\nexport class FormDropIn implements ModalComponent<DropInPreset> {\r\n  private context: DropInPreset;\r\n\r\n  constructor(public dialog: DialogRef<DropInPreset>) {\r\n    this.context = dialog.context;\r\n  }\r\n}\r\n"]}