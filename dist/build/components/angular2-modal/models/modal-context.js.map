{"version":3,"file":"modal-context.js","sourceRoot":"","sources":["modal-context.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,qBAA6C,eAAe,CAAC,CAAA;AAE7D,8BAAiD,8BAA8B,CAAC,CAAA;AAChF,sBAAmC,sBAAsB,CAAC,CAAA;AAG7C,sBAAc,GAAG;IAC1B,UAAU,EAAE,IAAI;IAChB,QAAQ,EAAE,CAAC,EAAE,CAAC;IACd,WAAW,EAAE,qBAAqB,OAAe;QAC7C,MAAM,CAAiB,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;IAChE,CAAC;CACJ,CAAC;AAEF,IAAM,eAAe,GAAG;IACpB,YAAY;IACZ,UAAU;IACV,SAAS;CACZ,CAAC;AAEF;IAAA;IAmCA,CAAC;IAZG,gCAAS,GAAT;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,KAAK,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAE3B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,QAAQ,GAAG,CAAS,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAgB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,QAAQ,GAAG,sBAAc,CAAC,QAAQ,CAAC;QAC5C,CAAC;IACL,CAAC;IACL,mBAAC;AAAD,CAAC,AAnCD,IAmCC;AAnCY,oBAAY,eAmCxB,CAAA;AAED;;;GAGG;AAEH;IAAiE,uCAAe;IAuB5E,6BACI,aAAkC,EAClC,cAAoC,EACpC,QAAiC;QAFjC,6BAAkC,GAAlC,yBAAkC;QAClC,8BAAoC,GAApC,0BAAoC;QACpC,wBAAiC,GAAjC,oBAAiC;QAEjC,kBACI,cAAM,CAAM,sBAAc,EAAE,aAAa,IAAI,EAAE,CAAC,EAChD,kBAAU,CAAS,eAAe,EAAE,cAAc,IAAI,EAAE,CAAC,EACzD,QAAQ,CACX,CAAC;IACN,CAAC;IAlCL;QAAC,iBAAU,EAAE;;2BAAA;IAmCb,0BAAC;AAAD,CAAC,AAlCD,CAAiE,4BAAY,GAkC5E;AAlCY,2BAAmB,sBAkC/B,CAAA","sourcesContent":["import { Injectable, ViewContainerRef } from '@angular/core';\r\n\r\nimport { FluentAssign, FluentAssignMethod } from './../framework/fluent-assign';\r\nimport { extend, arrayUnion } from './../framework/utils';\r\nimport { DialogRef } from './dialog-ref';\r\n\r\nexport const DEFAULT_VALUES = {\r\n    isBlocking: true,\r\n    keyboard: [27],\r\n    supportsKey: function supportsKey(keyCode: number): boolean {\r\n        return (<Array<number>>this.keyboard).indexOf(keyCode) > -1;\r\n    }\r\n};\r\n\r\nconst DEFAULT_SETTERS = [\r\n    'isBlocking',\r\n    'keyboard',\r\n    'message'\r\n];\r\n\r\nexport class ModalContext {\r\n    /**\r\n     * Describes if the modal is blocking modal.\r\n     * A Blocking modal is not closable by clicking outside of the modal window.\r\n     * Defaults to false.\r\n     */\r\n    isBlocking: boolean;\r\n\r\n    /**\r\n     * Keyboard value/s that close the modal.\r\n     * Accepts either a single numeric value or an array of numeric values.\r\n     * A modal closed by a keyboard stroke will result in a 'reject' notification from the promise.\r\n     * Defaults to 27, set `null` implicitly to disable.\r\n     */\r\n    keyboard: Array<number> | number;\r\n\r\n    /**\r\n     * The core message to display.\r\n     * A modal might have an extended message (e.g: HTML message) or other fields (e.g: title) but\r\n     * all models, at core, convey a message thus message is common to all modals.\r\n     */\r\n    message: string;\r\n    \r\n    normalize(): void {\r\n        if (this.isBlocking !== false)\r\n            this.isBlocking = true;\r\n\r\n        if (this.keyboard === null) {\r\n            this.keyboard = [];\r\n        } else if (typeof this.keyboard === 'number') {\r\n            this.keyboard = [<number>this.keyboard];\r\n        } else if (!Array.isArray(<Array<number>>this.keyboard)) {\r\n            this.keyboard = DEFAULT_VALUES.keyboard;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * A core context builder for a modal window instance, used to define the context upon\r\n * a modal choose it's behaviour.\r\n */\r\n@Injectable()\r\nexport class ModalContextBuilder<T extends ModalContext> extends FluentAssign<T> {\r\n    /**\r\n     * Describes if the modal is blocking modal.\r\n     * A Blocking modal is not closable by clicking outside of the modal window.\r\n     * Defaults to false.\r\n     */\r\n    isBlocking: FluentAssignMethod<boolean, this>;\r\n\r\n    /**\r\n     * Keyboard value/s that close the modal.\r\n     * Accepts either a single numeric value or an array of numeric values.\r\n     * A modal closed by a keyboard stroke will result in a 'reject' notification from the promise.\r\n     * Defaults to 27, set `null` implicitly to disable.\r\n     */\r\n    keyboard: FluentAssignMethod<Array<number> | number, this>;\r\n\r\n    /**\r\n     * The core message to display.\r\n     * A modal might have an extended message (e.g: HTML message) or other fields (e.g: title) but\r\n     * all models, at core, convey a message thus message is common to all modals.\r\n     */\r\n    message: FluentAssignMethod<string, this>;\r\n\r\n    constructor(\r\n        defaultValues: T | T[] = undefined,\r\n        initialSetters: string[] = undefined,\r\n        baseType: new () => T = undefined\r\n    ) {\r\n        super(\r\n            extend<any>(DEFAULT_VALUES, defaultValues || {}),\r\n            arrayUnion<string>(DEFAULT_SETTERS, initialSetters || []),\r\n            baseType\r\n        );\r\n    }\r\n}\r\n\r\nexport interface ModalControllingContextBuilder<T> {\r\n    open(viewContainer?: ViewContainerRef): Promise<DialogRef<T>>;\r\n}\r\n"]}